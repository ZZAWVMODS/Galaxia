<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ùôÑ ùôáùô§ùô´ùôö ùôîùô§ùô™ üå∏</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300&family=Dancing+Script:wght@700&family=Cormorant+Garamond:ital,wght@1,600&family=Great+Vibes&family=Playfair+Display:ital@1&display=swap');

        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        body { margin: 0; overflow: hidden; background-color: #000; font-family: 'Quicksand', sans-serif; }
        #canvas-container { width: 100vw; height: 100vh; touch-action: none; }

        #intro-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; display: flex; justify-content: center; align-items: center;
            z-index: 2000; transition: opacity 2.5s ease-in-out;
        }
        
        #intro-text {
            color: #fff; 
            font-family: 'Cormorant Garamond', serif;
            font-style: italic;
            font-size: clamp(1.6rem, 7vw, 3rem); text-align: center;
            padding: 40px; opacity: 0; 
            transition: opacity 2s, filter 3s cubic-bezier(0.4, 0, 0.2, 1), transform 3s ease-out;
            letter-spacing: 3px;
            line-height: 1.4;
        }

        .dust-effect {
            opacity: 0 !important;
            filter: blur(15px) contrast(0.5) brightness(1.5) opacity(0);
            transform: scale(1.15) translateY(-30px) rotateX(10deg);
            letter-spacing: 12px; 
        }

        #valentine-tag {
            position: fixed; top: 25px; right: 25px;
            color: #d4af37;
            font-family: 'Great Vibes', cursive;
            font-size: 32px; text-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
            pointer-events: none; z-index: 100;
        }

        #instructions {
            position: fixed; bottom: 50px; width: 100%; text-align: center;
            color: rgba(255,255,255,0.5); font-size: 11px; letter-spacing: 3px;
            text-transform: uppercase; pointer-events: none;
            animation: breathe 3.5s infinite ease-in-out; z-index: 100;
        }

        #audio-starter {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000000;
            z-index: 3000; display: flex;
            justify-content: center; align-items: center; color: white;
            cursor: pointer; 
            transition: all 0.5s ease;
        }
        
        #push-button {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-weight: 400;
            font-size: clamp(2rem, 8vw, 4rem);
            color: #ffffff;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.7), 0 0 30px rgba(255, 255, 255, 0.5);
            padding: 15px 35px;
            border: 2px solid #ffffff;
            border-radius: 60px;
            background: transparent;
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.4);
            animation: white-pulse 2s infinite alternate;
            transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
            letter-spacing: 2px;
            transform-origin: center;
        }
        
        #push-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 45px rgba(255, 255, 255, 0.8);
            border-color: rgba(255, 255, 255, 1);
        }
        
        @keyframes white-pulse {
            0% { text-shadow: 0 0 15px rgba(255, 255, 255, 0.7), 0 0 30px rgba(255, 255, 255, 0.4); box-shadow: 0 0 25px rgba(255, 255, 255, 0.4); border-color: rgba(255, 255, 255, 0.8); }
            100% { text-shadow: 0 0 25px rgba(255, 255, 255, 1), 0 0 50px rgba(255, 255, 255, 0.8); box-shadow: 0 0 50px rgba(255, 255, 255, 0.7); border-color: #ffffff; }
        }
        
        .explosion-particle {
            position: fixed;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: radial-gradient(circle, #fff, #ffaa00);
            box-shadow: 0 0 20px #ffd700;
            pointer-events: none;
            z-index: 3500;
            transform: translate(-50%, -50%);
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.1; transform: translateY(0); }
            50% { opacity: 0.6; transform: translateY(-5px); }
        }
    </style>
</head>
<body>
    <div id="audio-starter">
        <div id="push-button">Push Here</div>
    </div>

    <div id="intro-screen">
        <div id="intro-text">"Ni la inmensidad de una galaxia<br>se compara con tu belleza..."</div>
    </div>

    <div id="valentine-tag"></div>
    <div id="instructions">Use your finger to interact with the universe</div>
    <div id="canvas-container"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script id="star-v" type="x-shader/x-vertex">
        attribute float size;
        attribute float blinkSpeed;
        varying vec3 vColor;
        varying float vBlink;
        uniform float time;
        void main() {
            vColor = color;
            vBlink = 0.7 + 0.3 * sin(time * blinkSpeed);
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * vBlink * (300.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
        }
    </script>

    <script id="star-f" type="x-shader/x-fragment">
        varying vec3 vColor;
        varying float vBlink;
        void main() {
            float d = distance(gl_PointCoord, vec2(0.5, 0.5));
            if (d > 0.5) discard;
            gl_FragColor = vec4(vColor, pow(1.0 - d*2.0, 2.0) * vBlink);
        }
    </script>

    <script>
        const audio = new Audio('https://cdn.russellxz.click/b2f42065.oga');
        audio.preload = 'auto';
        audio.loop = false;
        audio.volume = 0.001;

        function playMusic() {
            audio.currentTime = 43;
            audio.play().catch(e => console.log('Error al reproducir:', e));
            
            let vol = 0.001;
            const fadeIn = setInterval(() => {
                vol += 0.0033;
                if (vol >= 0.35) {
                    vol = 0.35;
                    clearInterval(fadeIn);
                }
                audio.volume = vol;
            }, 30);
            
            setTimeout(() => {
                const fadeOut = setInterval(() => {
                    vol -= 0.002;
                    if (vol <= 0.08) {
                        vol = 0.08;
                        clearInterval(fadeOut);
                        audio.volume = 0.08;
                    } else {
                        audio.volume = vol;
                    }
                }, 30);
            }, 3000);
        }

        function createVisualExplosion(centerX, centerY) {
            const particleCount = 40;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'explosion-particle';
                
                const size = 4 + Math.random() * 15;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                const hue = 40 + Math.random() * 20;
                particle.style.background = `radial-gradient(circle, #fff, hsl(${hue}, 100%, 60%))`;
                particle.style.boxShadow = `0 0 30px hsl(${hue}, 100%, 70%)`;
                
                particle.style.left = centerX + 'px';
                particle.style.top = centerY + 'px';
                
                document.body.appendChild(particle);
                
                const angle = Math.random() * Math.PI * 2;
                const velocity = 3 + Math.random() * 12;
                const vx = Math.cos(angle) * velocity;
                const vy = Math.sin(angle) * velocity;
                let life = 1.0;
                const decay = 0.01 + Math.random() * 0.02;
                
                function animateParticle() {
                    if (life <= 0) {
                        if (particle.parentNode) particle.remove();
                        return;
                    }
                    
                    const currentLeft = parseFloat(particle.style.left);
                    const currentTop = parseFloat(particle.style.top);
                    particle.style.left = (currentLeft + vx) + 'px';
                    particle.style.top = (currentTop + vy) + 'px';
                    
                    life -= decay;
                    const scale = Math.max(0, life);
                    particle.style.transform = `translate(-50%, -50%) scale(${scale})`;
                    particle.style.opacity = life;
                    
                    requestAnimationFrame(animateParticle);
                }
                
                requestAnimationFrame(animateParticle);
            }
        }

        document.getElementById('audio-starter').addEventListener('click', function(e) {
            const button = document.getElementById('push-button');
            const rect = button.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            createVisualExplosion(centerX, centerY);
            
            this.style.opacity = '0';
            setTimeout(() => {
                this.style.display = 'none';
            }, 500);
            
            playMusic();
            runIntro();
        });

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 4000);
        camera.position.set(0, 45, 100);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.autoRotate = true;
        controls.autoRotateSpeed = 0.3;

        function createGlowTexture(c1 = 'rgba(255, 255, 255, 1)', c2 = 'rgba(255, 255, 255, 0)') {
            const size = 128;
            const canvas = document.createElement('canvas');
            canvas.width = size; canvas.height = size;
            const ctx = canvas.getContext('2d');
            const grd = ctx.createRadialGradient(size/2, size/2, 0, size/2, size/2, size/2);
            grd.addColorStop(0, c1);
            grd.addColorStop(0.5, c2);
            grd.addColorStop(1, 'rgba(0, 0, 0, 0)');
            ctx.fillStyle = grd; ctx.fillRect(0, 0, size, size);
            return new THREE.CanvasTexture(canvas);
        }

        function createFlare() {
            const flareGeo = new THREE.PlaneGeometry(12, 12);
            const flareMat = new THREE.MeshBasicMaterial({
                map: createGlowTexture('rgba(255,255,255,0.7)', 'rgba(200,200,255,0)'),
                transparent: true, blending: THREE.AdditiveBlending, depthWrite: false, opacity: 0
            });
            const flare = new THREE.Mesh(flareGeo, flareMat);
            flare.position.set((Math.random()-0.5)*1500, (Math.random()-0.5)*1500, (Math.random()-0.5)*1500);
            scene.add(flare);
            const anim = () => {
                flare.lookAt(camera.position);
                flare.material.opacity += 0.008;
                if(flare.material.opacity < 0.6) requestAnimationFrame(anim);
                else fadeOut();
            };
            const fadeOut = () => {
                flare.material.opacity -= 0.004;
                if(flare.material.opacity > 0) requestAnimationFrame(fadeOut);
                else { scene.remove(flare); flare.geometry.dispose(); flare.material.dispose(); }
            };
            anim();
        }

        const bhGroup = new THREE.Group();
        const glowSprite = new THREE.Sprite(new THREE.SpriteMaterial({
            map: createGlowTexture('rgba(255, 230, 180, 0.8)', 'rgba(255, 150, 50, 0)'),
            blending: THREE.AdditiveBlending, transparent: true, depthWrite: false 
        }));
        glowSprite.scale.set(25, 25, 1);
        bhGroup.add(glowSprite);

        const singularity = new THREE.Mesh(
            new THREE.SphereGeometry(2.8, 64, 64),
            new THREE.MeshBasicMaterial({ color: 0x000000 })
        );
        bhGroup.add(singularity);
        scene.add(bhGroup);

        const backgroundStarsGeo = new THREE.BufferGeometry();
        const bPos = new Float32Array(100000 * 3); 
        for(let i=0; i<100000*3; i++) bPos[i] = (Math.random()-0.5) * 4000;
        backgroundStarsGeo.setAttribute('position', new THREE.BufferAttribute(bPos, 3));
        scene.add(new THREE.Points(backgroundStarsGeo, new THREE.PointsMaterial({color: 0xffffff, size: 0.3, transparent: true, opacity: 0.4})));

        function createDistantGalaxy() {
            const particles = 500 + Math.random() * 500;
            const gPos = new Float32Array(particles * 3);
            const gColor = new THREE.Color().setHSL(Math.random(), 0.7, 0.6);
            for(let i=0; i<particles*3; i+=3) {
                const r = Math.random() * 40;
                const a = Math.random() * Math.PI * 2;
                gPos[i] = Math.cos(a) * r; gPos[i+1] = (Math.random()-0.5) * 12; gPos[i+2] = Math.sin(a) * r;
            }
            const gGeo = new THREE.BufferGeometry();
            gGeo.setAttribute('position', new THREE.BufferAttribute(gPos, 3));
            const points = new THREE.Points(gGeo, new THREE.PointsMaterial({color: gColor, size: 0.5, transparent: true, opacity: 0.5}));
            points.position.set((Math.random()-0.5)*3500, (Math.random()-0.5)*2500, (Math.random()-0.5)*3500);
            scene.add(points);
        }
        for(let i=0; i<45; i++) createDistantGalaxy();

        for(let i=0; i<60; i++) {
            const nebSprite = new THREE.Sprite(new THREE.SpriteMaterial({
                map: createGlowTexture('rgba(100, 100, 255, 0.03)', 'rgba(0,0,0,0)'),
                blending: THREE.AdditiveBlending, transparent: true, depthWrite: false 
            }));
            const dist = 100 + Math.random() * 400;
            const angle = Math.random() * Math.PI * 2;
            nebSprite.position.set(Math.cos(angle)*dist, (Math.random()-0.5)*250, Math.sin(angle)*dist);
            nebSprite.scale.set(200 + Math.random()*200, 200 + Math.random()*200, 1);
            scene.add(nebSprite);
        }

        const starsGeo = new THREE.BufferGeometry();
        const count = 350000; 
        const pos = new Float32Array(count * 3);
        const col = new Float32Array(count * 3);
        const siz = new Float32Array(count);
        const blk = new Float32Array(count);

        const cGold = new THREE.Color('#d4af37');
        const cWhite = new THREE.Color('#ffffff');
        const cGray = new THREE.Color('#333333');

        for(let i = 0; i < count; i++) {
            const i3 = i * 3;
            const r = Math.random() * 65;
            const armAngle = (i % 3) * (Math.PI * 2 / 3);
            const angle = r * 0.45 + armAngle; 
            const randomSpread = Math.pow(Math.random(), 1.2) * 0.8 * r;
            
            pos[i3] = Math.cos(angle) * r + (Math.random()-0.5) * randomSpread;
            pos[i3+1] = (Math.random()-0.5) * (Math.random() * 0.35 * r);
            pos[i3+2] = Math.sin(angle) * r + (Math.random()-0.5) * randomSpread;

            const ratio = r / 65;
            let mCol;
            if(ratio < 0.2) mCol = cGold.clone().lerp(cWhite, ratio*2);
            else if(ratio < 0.6) mCol = cWhite.clone();
            else mCol = cWhite.clone().lerp(cGray, (ratio - 0.6) * 2.5);
            
            col[i3] = mCol.r; col[i3+1] = mCol.g; col[i3+2] = mCol.b;
            siz[i] = Math.random() * 1.8;
            blk[i] = 1.0 + Math.random() * 5.0;
        }

        starsGeo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
        starsGeo.setAttribute('color', new THREE.BufferAttribute(col, 3));
        starsGeo.setAttribute('size', new THREE.BufferAttribute(siz, 1));
        starsGeo.setAttribute('blinkSpeed', new THREE.BufferAttribute(blk, 1));

        const starMaterial = new THREE.ShaderMaterial({
            uniforms: { time: { value: 0 } },
            vertexShader: document.getElementById('star-v').textContent,
            fragmentShader: document.getElementById('star-f').textContent,
            transparent: true, blending: THREE.AdditiveBlending, depthWrite: false, vertexColors: true
        });
        const stars = new THREE.Points(starsGeo, starMaterial);
        scene.add(stars);

        function spawnShootingStar() {
            const start = new THREE.Vector3((Math.random()-0.5)*1800, (Math.random()-0.5)*1800, (Math.random()-0.5)*1800);
            const end = start.clone().add(new THREE.Vector3(70, 35, 0));
            const line = new THREE.Line(new THREE.BufferGeometry().setFromPoints([start, end]), new THREE.LineBasicMaterial({color: 0xffffff, transparent: true}));
            scene.add(line);
            const anim = () => {
                line.material.opacity -= 0.015; line.position.add(new THREE.Vector3(3, 1.5, 0));
                if(line.material.opacity > 0) requestAnimationFrame(anim);
                else { scene.remove(line); line.geometry.dispose(); }
            };
            anim();
        }

        function runIntro() {
            setTimeout(() => { document.getElementById('intro-text').style.opacity = 1; }, 600);
            setTimeout(() => {
                const text = document.getElementById('intro-text');
                const screen = document.getElementById('intro-screen');
                text.classList.add('dust-effect');
                setTimeout(() => {
                    screen.style.opacity = 0;
                    setTimeout(() => screen.style.display = 'none', 2000);
                }, 1500);
            }, 3500);
        }

        function animate() {
            requestAnimationFrame(animate);
            const elapsed = performance.now() * 0.001;
            starMaterial.uniforms.time.value = elapsed;
            stars.rotation.y += 0.0004;
            if(Math.random() < 0.05) spawnShootingStar(); 
            if(Math.random() < 0.012) createFlare(); 
            controls.update();
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>